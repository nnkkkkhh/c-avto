import{u as v,r as c,j as e,S,d as b,t as u,X as C}from"./index-C7RinoSz.js";import{u as W}from"./useQuery-DsAPcWpp.js";import{P as k}from"./plus-DYFc_zNV.js";import{S as z,T as L}from"./trash-2-BoQx_ah3.js";import{C as q}from"./clock-0scXgq7n.js";const p=["Все","Диагностика","Терапия","Гигиена","Эстетика","Хирургия","Ортодонтия","Ортопедия"],D={Диагностика:"bg-blue-50 text-blue-700",Терапия:"bg-green-50 text-green-700",Гигиена:"bg-teal-50 text-teal-700",Эстетика:"bg-purple-50 text-purple-700",Хирургия:"bg-red-50 text-red-700",Ортодонтия:"bg-orange-50 text-orange-700",Ортопедия:"bg-indigo-50 text-indigo-700"};function E({service:s,onClose:i,onSave:x}){const[a,l]=c.useState({name:(s==null?void 0:s.name)||"",category:(s==null?void 0:s.category)||"Терапия",duration:(s==null?void 0:s.duration)||60,price:(s==null?void 0:s.price)||0,description:(s==null?void 0:s.description)||""}),m=r=>{r.preventDefault(),x(a)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-100",children:[e.jsx("h2",{className:"text-gray-900",style:{fontSize:"1.1rem",fontWeight:600},children:s?"Редактировать услугу":"Новая услуга"}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(C,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1.5",style:{fontWeight:500},children:"Название *"}),e.jsx("input",{type:"text",value:a.name,onChange:r=>l({...a,name:r.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm",placeholder:"Название услуги",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1.5",style:{fontWeight:500},children:"Категория *"}),e.jsx("select",{value:a.category,onChange:r=>l({...a,category:r.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm",children:p.filter(r=>r!=="Все").map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1.5",style:{fontWeight:500},children:"Продолжительность (мин) *"}),e.jsx("input",{type:"number",value:a.duration,onChange:r=>l({...a,duration:Number(r.target.value)}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm",min:"5",step:"5",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1.5",style:{fontWeight:500},children:"Цена (₽) *"}),e.jsx("input",{type:"number",value:a.price,onChange:r=>l({...a,price:Number(r.target.value)}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm",min:"0",step:"100",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1.5",style:{fontWeight:500},children:"Описание"}),e.jsx("textarea",{value:a.description,onChange:r=>l({...a,description:r.target.value}),rows:2,className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm resize-none",placeholder:"Краткое описание услуги..."})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:i,className:"flex-1 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors text-sm",style:{fontWeight:500},children:"Отмена"}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors text-sm shadow-lg shadow-blue-200",style:{fontWeight:500},children:s?"Сохранить":"Добавить"})]})]})]})})}function $(){const{services:s,addService:i,updateService:x,deleteService:a}=v(),[l,m]=c.useState(""),[r,y]=c.useState("Все"),[o,d]=c.useState(null),{isLoading:f}=W({queryKey:["services"],queryFn:async()=>(await new Promise(t=>setTimeout(t,300)),s),initialData:s}),g=s.filter(t=>{var h;const n=t.name.toLowerCase().includes(l.toLowerCase())||((h=t.description)==null?void 0:h.toLowerCase().includes(l.toLowerCase())),w=r==="Все"||t.category===r;return n&&w}),j=t=>{o==="new"?(i(t),u.success("Услуга добавлена")):o&&(x(o.id,t),u.success("Услуга обновлена")),d(null)},N=(t,n)=>{confirm(`Удалить услугу "${n}"?`)&&(a(t),u.success("Услуга удалена"))};return g.reduce((t,n)=>t+n.price,0),f&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-10 h-10 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6 max-w-[1400px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900",style:{fontSize:"1.75rem",fontWeight:700},children:"Услуги клиники"}),e.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Управление прайс-листом"})]}),e.jsxs("button",{onClick:()=>d("new"),className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors text-sm shadow-lg shadow-blue-200",style:{fontWeight:500},children:[e.jsx(k,{className:"w-4 h-4"}),"Добавить услугу"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Всего услуг"}),e.jsx("p",{className:"text-gray-900 mt-1",style:{fontSize:"1.75rem",fontWeight:700},children:s.length})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Категорий"}),e.jsx("p",{className:"text-gray-900 mt-1",style:{fontSize:"1.75rem",fontWeight:700},children:new Set(s.map(t=>t.category)).size})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Мин. цена"}),e.jsxs("p",{className:"text-gray-900 mt-1",style:{fontSize:"1.75rem",fontWeight:700},children:[Math.min(...s.map(t=>t.price)).toLocaleString("ru")," ₽"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Макс. цена"}),e.jsxs("p",{className:"text-gray-900 mt-1",style:{fontSize:"1.75rem",fontWeight:700},children:[Math.max(...s.map(t=>t.price)).toLocaleString("ru")," ₽"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5",children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:t=>m(t.target.value),placeholder:"Поиск по названию или описанию...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm"})]})}),e.jsx("div",{className:"flex gap-2 mt-4 flex-wrap",children:p.map(t=>e.jsxs("button",{onClick:()=>y(t),className:`px-3 py-1.5 rounded-lg text-xs transition-all ${r===t?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{fontWeight:500},children:[t,t!=="Все"&&e.jsx("span",{className:`ml-1.5 ${r===t?"text-blue-100":"text-gray-400"}`,children:s.filter(n=>n.category===t).length})]},t))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:g.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5 hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 text-sm",style:{fontWeight:600},children:t.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full mt-0.5 inline-block ${D[t.category]||"bg-gray-50 text-gray-600"}`,style:{fontWeight:500},children:t.category})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>d(t),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(t.id,t.name),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(L,{className:"w-4 h-4"})})]})]}),t.description&&e.jsx("p",{className:"text-gray-400 text-xs mb-4 leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-500",children:[e.jsx(q,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"text-xs",children:[t.duration," мин"]})]}),e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("p",{className:"text-gray-900",style:{fontSize:"1.1rem",fontWeight:700},children:[t.price.toLocaleString("ru")," ₽"]})})]})]},t.id))}),g.length===0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 text-center py-16",children:[e.jsx(b,{className:"w-12 h-12 text-gray-200 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:l?"Ничего не найдено":"Нет услуг в этой категории"})]}),o!==null&&e.jsx(E,{service:o==="new"?null:o,onClose:()=>d(null),onSave:j})]})}export{$ as default};
